
<div class="patterns-container">
  <% patterns.each do |pattern| %>
    <div class="pattern-box">   
        <% if pattern.complete or (user_signed_in? && current_user.id == pattern.user_id) %>       
          
          <ul class = "pattern-details">
          <li class = 'pattern-title'><%= pattern.name %></li>
          <% if pattern.pictures.attached? %>
            <li class = "pattern-thumb">
            <%= image_tag pattern.pictures[0].variant(resize_to_limit: [200, 200]) %>
            </li>
          <% end %>
          <li>By: <%= User.find(pattern.user_id).username %></li>
          <li>For sizes: <%= pattern.sizes %></li>
          <li>Type: <%= Garment.find(pattern.garment_id).name %></li>
          <li>For: <%= pattern.category %></li>
          
          <li>Description: <%= pattern.description %></li>
          <li>Difficulty: <%= pattern.difficulty %></li>
          <li>Price: <%= number_to_currency(pattern.price) %></li>
          </ul>
          <div class = "pattern-links">
          <%= link_to 'Show', pattern %>
          <% if user_signed_in? && (current_user.id == pattern.user_id && current_user.is_seller || current_user.admin) %>
            <%= link_to 'Edit', edit_pattern_path(pattern) %>
            <% if !pattern.complete || !pattern.transactions.any? %>
              <%= link_to 'Destroy', pattern, method: :delete, data: { confirm: 'Are you sure?' } %>
            <% end %>
          <% end %>
          </div>
        <% end %>
    </div>
  <% end %>
</div>


